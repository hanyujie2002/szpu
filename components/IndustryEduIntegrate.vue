<template>
  <section class="relative w-full py-[42.5px] md:pb-[59.5px] md:pt-[102px]">
    <div
      ref="home3Bg"
      class="home3-bg absolute bottom-0 left-0 right-0 top-0 -z-10 bg-no-repeat transition-transform duration-700 ease-out"
    />
    <div
      ref="home5Bg2"
      class="home5-bg2 absolute bottom-0 left-0 right-0 top-0 -z-10 bg-right-bottom bg-no-repeat transition-transform duration-700 ease-out"
      style="background-size: 31.7%"
    />
    <div
      class="w-full px-[15px] md:px-[59.5px] lg:mx-auto lg:w-[1200px] lg:max-w-[94%] lg:px-0"
    >
      <div
        class="mb-[46.75px] flex items-center justify-between !duration-1000"
        data-aos="fade-up"
      >
        <NuxtLink to="kxyj/xsky">
          <div
            class="relative pl-[17px] before:absolute before:bottom-0 before:left-0 before:top-0 before:w-[3px] before:bg-[#ff860b] before:content-['']"
          >
            <div
              class="uppercase"
              style="font-size: 13.6px; line-height: 13.6px"
            >
              Industry-education Integration
            </div>
            <div
              class="mt-[8.5px] font-semibold"
              style="font-size: 28.9px; line-height: 28.9px"
            >
              产教融合
            </div>
          </div>
        </NuxtLink>
        <div>
          <NuxtLink
            to="xxgk/xxjj"
            class="group flex items-center justify-between"
          >
            <h4
              class="text-[#fba33e]"
              style="font-size: 12.75px; line-height: 15.9375px"
            >
              查看更多
            </h4>
            <div
              class="bg-more1 relative ml-[10.2px] mt-[-3px] flex h-[5.94792px] w-[25.5px] items-center overflow-hidden before:absolute before:bottom-0 before:left-0 before:right-0 before:top-0 before:translate-x-[-110%] before:select-none before:bg-[length:100%_100%] before:bg-center before:bg-no-repeat before:duration-500 lg:w-[24px] lg:group-hover:before:translate-x-0"
            >
              <NuxtImg
                quality="80"
                class="h-full w-full select-none duration-500 lg:group-hover:translate-x-[110%]"
                src="/images/more1.svg"
              />
            </div>
          </NuxtLink>
        </div>
      </div>

      <div class="flex flex-wrap items-end !duration-1000" data-aos="fade-up">
        <ul class="w-full md:w-[68%] md:pr-[17.04px]">
          <li class="relative">
            <NuxtLink
              class="group"
              to="info/1095/20634.htm"
              title="我校携400余件师生作品参展文博会"
            >
              <div
                class="list11-top-bg bg-size-full overflow-hidden after:absolute after:bottom-0 after:left-0 after:right-0 after:top-0 after:bg-[center_102%] after:bg-no-repeat after:content-['']"
              >
                <NuxtImg
                  format="webp"
                  quality="80"
                  class="aspect-[1/0.3872] h-full w-full select-none object-cover lg:object-cover lg:transition-transform lg:duration-1000 lg:ease-[cubic-bezier(0.25,0,0,1)] lg:group-hover:scale-[1.08]"
                  src="/images/37AAA58D940785BF2671D19CD6F_1B05DAD4_3E3E4.jpg"
                />
              </div>
              <div
                class="flex-start absolute bottom-0 left-0 right-0 top-0 flex flex-col items-start justify-end px-[12.75px] pb-[17px] text-white md:px-[29.75px]"
              >
                <span style="font-size: 13.6px; line-height: 13.6px"
                  >2024-05-24</span
                >
                <h4
                  class="mb-[11.9px] mt-[10.2px]"
                  style="font-size: 18.7px; line-height: 18.7px"
                >
                  我校携400余件师生作品参展文博会
                </h4>
              </div>
            </NuxtLink>
          </li>
        </ul>
        <ul class="w-full md:w-[calc(100%_-_68%)] md:pl-[17.04px]">
          <li class="list-item">
            <NuxtLink to="xxgk/xxjj" class="group flex flex-col">
              <div class="order-2 md:order-1">
                <span style="font-size: 13.6px; line-height: 13.6px"
                  >2024-03-08</span
                >
                <h4
                  style="font-size: 17px; line-height: 28.9px"
                  class="mt-[10.2px] line-clamp-2 antialiased transition-colors duration-500 lg:group-hover:text-[#fba33e]"
                >
                  学校与中国汽车工程研究院股份有限公司共建联合实验室
                </h4>
              </div>
              <div
                class="relative order-1 mb-[25.5px] mt-[42.5px] overflow-hidden md:order-2 md:mb-0"
              >
                <NuxtImg
                  format="webp"
                  quality="80"
                  class="aspect-[1/0.4563] select-none object-cover lg:object-cover lg:transition-transform lg:duration-1000 lg:ease-[cubic-bezier(0.25,0,0,1)] lg:group-hover:scale-[1.08]"
                  src="/images/438041A7E1EE841E49054CE3013_836CB248_51011.jpg"
                />
              </div>
            </NuxtLink>
          </li>
        </ul>
      </div>

      <ul
        class="mt-[25.5px] flex flex-wrap !duration-1000 md:mx-[-17.04px] md:mt-[40.8px] md:font-bold"
        data-aos="fade-up"
      >
        <li
          class="mb-[17px] list-item w-full md:mb-0 md:w-[33.33%] md:px-[17.04px]"
        >
          <NuxtLink to="xxgk/xxjj" class="group relative z-10 block">
            <div
              class="border-t-[1.33333px] border-[#e5e5e5] pt-[17px] after:absolute after:left-0 after:top-0 after:h-[2px] after:w-0 after:duration-500 md:pt-[27.2px] lg:pt-[25.6px] lg:group-hover:after:w-full lg:group-hover:after:bg-[#ff860b]"
            >
              <span
                class="font-normal"
                style="font-size: 13.6px; line-height: 13.6px"
                >2023-12-14</span
              >
              <h4
                class="mt-[6.8px] line-clamp-2 text-[17px] text-[#333] transition-colors duration-500 md:text-[16.15px] lg:group-hover:text-[#fba33e]"
                style="line-height: 25.5px"
              >
                校企产学研用深度融合 助力广东产业高质量发展
              </h4>
            </div>
          </NuxtLink>
        </li>

        <li
          class="mb-[17px] list-item w-full md:mb-0 md:w-[33.33%] md:px-[17.04px]"
        >
          <NuxtLink to="xxgk/xxjj" class="group relative z-10 block">
            <div
              class="border-t-[1.33333px] border-[#e5e5e5] pt-[17px] after:absolute after:left-0 after:top-0 after:h-[2px] after:w-0 after:duration-500 md:pt-[27.2px] lg:pt-[25.6px] lg:group-hover:after:w-full lg:group-hover:after:bg-[#ff860b]"
            >
              <span
                class="font-normal"
                style="font-size: 13.6px; line-height: 13.6px"
                >2023-12-05</span
              >
              <h4
                class="mt-[6.8px] line-clamp-2 text-[17px] text-[#333] transition-colors duration-500 md:text-[16.15px] lg:group-hover:text-[#fba33e]"
                style="line-height: 25.5px"
              >
                全国高等职业院校技术应用服务联盟2023年年会在我校顺利召开
              </h4>
            </div>
          </NuxtLink>
        </li>

        <li class="list-item w-full md:mb-0 md:w-[33.33%] md:px-[17.04px]">
          <NuxtLink to="xxgk/xxjj" class="group relative z-10 block">
            <div
              class="border-t-[1.33333px] border-[#e5e5e5] pt-[17px] after:absolute after:left-0 after:top-0 after:h-[2px] after:w-0 after:duration-500 md:pt-[27.2px] lg:pt-[25.6px] lg:group-hover:after:w-full lg:group-hover:after:bg-[#ff860b]"
            >
              <span
                class="font-normal"
                style="font-size: 13.6px; line-height: 13.6px"
                >2023-08-28</span
              >
              <h4
                class="mt-[6.8px] line-clamp-2 text-[17px] text-[#333] transition-colors duration-500 md:text-[16.15px] lg:group-hover:text-[#fba33e]"
                style="font-size: 16.15px; line-height: 25.5px"
              >
                2023年全国职业院校技能大赛高职组“酒水服务”赛项圆满落幕
              </h4>
            </div>
          </NuxtLink>
        </li>
      </ul>
    </div>
  </section>
</template>

<script setup>
const home3Bg = ref(null);
const home5Bg2 = ref(null);

const handleScroll = () => {
  if (window.innerWidth > 1024) {
    const scrollPosition = window.scrollY;
    const startScroll = 2510;
    const endScroll = 3770;

    const translateX = Math.max(
      0,
      200 -
        (Math.max(scrollPosition - startScroll, 0) /
          (endScroll - startScroll)) *
          200
    );
    home3Bg.value.style.transform = `translate3d(-${translateX}px, 0, 0) rotateY(180deg)`;

    const startScroll1 = 2000;
    const endScroll1 = 3500;
    const translateY = Math.max(
      0,
      1000 -
        (Math.max(0, scrollPosition - startScroll1, 0) /
          (endScroll1 - startScroll1)) *
          1000
    );
    home5Bg2.value.style.transform = `translate3d(0, ${translateY}px, 0)`;
  }
};

const handleResize = () => {
  if (window.innerWidth <= 1024) {
    home3Bg.value.style.transform = `translate3d(0, 0, 0) rotateY(180deg)`;
    home5Bg2.value.style.transform = `translate3d(0, 0, 0)`;
  }
};

onMounted(() => {
  window.addEventListener('scroll', handleScroll);
  window.addEventListener('resize', handleResize);
  handleResize();
});

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll);
  window.removeEventListener('resize', handleResize);
});
</script>

<style scoped>
.home3-bg {
  background-image: url(~/assets/images/home3_bg.jpg);
  background-size: 100% auto;
}

.home5-bg2 {
  background-image: url(~/assets/images/home5_bg2.jpg);
}

.list11-top-bg::after {
  background-image: url(~/assets/images/list11_top.png);
}

.bg-size-full::after {
  background-size: 100%;
}

.bg-more1::before {
  background-image: url(~/assets/images/more1.svg);
}
</style>
